from typing import Dict, Optional

import stripe


class StripePaymentProcessor:
    def __init__(self, secret_key: str) -> None:
        stripe.api_key = secret_key

    def create_charge(self, amount: int, currency: str, source: str, description: Optional[str] = None) -> Dict:
        try:
            charge = stripe.Charge.create(
                amount=amount,
                currency=currency,
                source=source,
                description=description
            )
            return charge
        except stripe.error.StripeError as e:
            return {"error": str(e)}

    def refund_charge(self, charge_id: str) -> Dict:
        try:
            refund = stripe.Refund.create(charge=charge_id)
            return refund
        except stripe.error.StripeError as e:
            return {"error": str(e)}
